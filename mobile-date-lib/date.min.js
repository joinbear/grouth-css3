(function(a){a.fn.date=function(r,G,R){var J=a(this);var k=a(this).is("input");var d=false;var P=new Date();var m=1,q=1,z=1;var v=1,u=1,n=0;var p=parseInt((P.getYear()+"").substr(1,2));var A=parseInt(P.getMonth()+"")+1;var I=parseInt(P.getDate()+"");var D=parseInt(P.getHours());var C=parseInt(P.getMinutes());var w=parseInt(P.getYear());var l=null,g=null,M=null;var T=null,F=null,O=null;a.fn.date.defaultOptions={beginyear:1970,endyear:2020,beginmonth:1,endmonth:12,beginday:1,endday:31,beginhour:1,endhour:12,beginminute:0,endminute:59,curdate:false,theme:"date",mode:null,event:"click",show:true};var x=a.extend(true,{},a.fn.date.defaultOptions,r);if(x.theme==="datetime"){d=true}if(!x.show){J.unbind("click")}else{J.bind(x.event,function(){S();j();f();J.blur();if(d){i();Q()}c();N()})}function c(){l.refresh();g.refresh();M.refresh();H();l.scrollTo(0,p*40,100,true);g.scrollTo(0,A*40-40,100,true);M.scrollTo(0,I*40-40,100,true)}function Q(){T.refresh();F.refresh();O.refresh();if(D>12){O.scrollTo(0,I*40-40,100,true);D=D-12-1}T.scrollTo(0,D*40,100,true);F.scrollTo(0,C*40,100,true);D=parseInt(P.getHours())}function h(){m=1;q=1;z=1}function H(){if(x.curdate){return false}else{if(J.val()===""){return false}}p=parseInt(J.val().substr(2,2));A=parseInt(J.val().substr(5,2));I=parseInt(J.val().substr(8,2))}function N(){h();a("#dateconfirm").unbind("click").click(function(){var U=a("#yearwrapper ul li:eq("+m+")").html().substr(0,a("#yearwrapper ul li:eq("+m+")").html().length-1)+"-"+a("#monthwrapper ul li:eq("+q+")").html().substr(0,a("#monthwrapper ul li:eq("+q+")").html().length-1)+"-"+a("#daywrapper ul li:eq("+Math.round(z)+")").html().substr(0,a("#daywrapper ul li:eq("+Math.round(z)+")").html().length-1);if(d){if(Math.round(n)===1){a("#Hourwrapper ul li:eq("+v+")").html(parseInt(a("#Hourwrapper ul li:eq("+v+")").html().substr(0,a("#Hourwrapper ul li:eq("+v+")").html().length-1))+12)}else{a("#Hourwrapper ul li:eq("+v+")").html(parseInt(a("#Hourwrapper ul li:eq("+v+")").html().substr(0,a("#Hourwrapper ul li:eq("+v+")").html().length-1)))}U+=" "+a("#Hourwrapper ul li:eq("+v+")").html().substr(0,a("#Minutewrapper ul li:eq("+v+")").html().length-1)+":"+a("#Minutewrapper ul li:eq("+u+")").html().substr(0,a("#Minutewrapper ul li:eq("+u+")").html().length-1);n=0}if(G===undefined){if(k){J.val(U)}else{J.html(U)}}else{G(U)}a("#datePage").hide();a("#dateshadow").hide()});a("#datecancle").click(function(){a("#datePage").hide();a("#dateshadow").hide();if(R&&typeof R=="function"){R(false)}})}function f(){a("#datePage").show();a("#dateshadow").show()}function j(){var U=a("#yearwrapper ul li:eq("+m+")").html().substr(0,a("#yearwrapper ul li:eq("+m+")").html().length-1);var V=a("#monthwrapper ul li:eq("+q+")").html().substr(0,a("#monthwrapper ul li:eq("+q+")").html().length-1);l=new iScroll("yearwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){m=(this.y/40)*(-1)+1;x.endday=t(U,V);a("#daywrapper ul").html(b());M.refresh()}});g=new iScroll("monthwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){q=(this.y/40)*(-1)+1;x.endday=t(U,V);a("#daywrapper ul").html(b());M.refresh()}});M=new iScroll("daywrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){z=(this.y/40)*(-1)+1}})}function i(){B();E();a("#datescroll_datetime").show();a("#Hourwrapper ul").html(L());a("#Minutewrapper ul").html(K());a("#Secondwrapper ul").html(e())}function B(){T=new iScroll("Hourwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){v=Math.round((this.y/40)*(-1))+1;T.refresh()}});F=new iScroll("Minutewrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){u=Math.round((this.y/40)*(-1))+1;T.refresh()}});O=new iScroll("Secondwrapper",{snap:"li",vScrollbar:false,onScrollEnd:function(){n=Math.round((this.y/40)*(-1));T.refresh()}})}function t(V,X){var Y=V;var U=X++;if(X>12){U-=12;Y++}var W=new Date(Y,U,1);return(new Date(W.getTime()-1000*60*60*24)).getDate()}function S(){o();a("#yearwrapper ul").html(y());a("#monthwrapper ul").html(s());a("#daywrapper ul").html(b())}function o(){var U=""+'<div id="dateshadow"></div>'+'<div id="datePage" class="page">'+"<section>"+'<div id="datetitle"><h1>请选择日期</h1></div>'+'<div id="datemark"><a id="markyear"></a><a id="markmonth"></a><a id="markday"></a></div>'+'<div id="timemark"><a id="markhour"></a><a id="markminut"></a><a id="marksecond"></a></div>'+'<div id="datescroll">'+'<div id="yearwrapper">'+"<ul></ul>"+"</div>"+'<div id="monthwrapper">'+"<ul></ul>"+"</div>"+'<div id="daywrapper">'+"<ul></ul>"+"</div>"+"</div>"+'<div id="datescroll_datetime">'+'<div id="Hourwrapper">'+"<ul></ul>"+"</div>"+'<div id="Minutewrapper">'+"<ul></ul>"+"</div>"+'<div id="Secondwrapper">'+"<ul></ul>"+"</div>"+"</div>"+"</section>"+'<footer id="dateFooter">'+'<div id="setcancle">'+"<ul>"+'<li id="dateconfirm">确定</li>'+'<li id="datecancle">取消</li>'+"</ul>"+"</div>"+"</footer>"+"</div>";a("#datePlugin").html(U)}function E(){a("#datePage").css("height","380px");a("#datePage").css("top","60px");a("#yearwrapper").css("position","absolute");
	a("#yearwrapper").css("bottom","200px");a("#monthwrapper").css("position","absolute");a("#monthwrapper").css("bottom","200px");a("#daywrapper").css("position","absolute");a("#daywrapper").css("bottom","200px")}function y(){var V="<li>&nbsp;</li>";for(var U=x.beginyear;U<=x.endyear;U++){V+="<li>"+U+"年</li>"}return V+"<li>&nbsp;</li>"}function s(){var V="<li>&nbsp;</li>";for(var U=x.beginmonth;U<=x.endmonth;U++){if(U<10){U="0"+U}V+="<li>"+U+"月</li>"}return V+"<li>&nbsp;</li>"}function b(){a("#daywrapper ul").html("");var V="<li>&nbsp;</li>";for(var U=x.beginday;U<=x.endday;U++){V+="<li>"+U+"日</li>"}return V+"<li>&nbsp;</li>"}function L(){var V="<li>&nbsp;</li>";for(var U=x.beginhour;U<=x.endhour;U++){V+="<li>"+U+"时</li>"}return V+"<li>&nbsp;</li>"}function K(){var V="<li>&nbsp;</li>";for(var U=x.beginminute;U<=x.endminute;U++){if(U<10){U="0"+U}V+="<li>"+U+"分</li>"}return V+"<li>&nbsp;</li>"}function e(){var U="<li>&nbsp;</li>";U+="<li>上午</li><li>下午</li>";return U+"<li>&nbsp;</li>"}}})(jQuery);